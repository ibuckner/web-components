<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>Web components with Stencil</title>
  <script type="module" src="/build/web-components.esm.js"></script>
  <script nomodule src="/build/web-components.js"></script>
  <style>
    html, body, input, label, textarea {
      font-family: Arial, Helvetica, sans-serif;
    }

    .panel {
      align-items: center;
      display: flex;
      justify-content: space-between
    }

    .panel > label { width: 100px }

    .box {
      border: 1px solid #000;
      border-radius: 5px;
      margin: 0.5rem;
      padding: 0.5rem;
      text-align: center;
      width: 3rem
    }

    .narrow { width: 35% }

    .modal-message {
      background-color:#fff;
      height: 200;
      padding: 2rem;
      width: 200
    }
  </style>
</head>
<body>
  <fieldset>
    <legend><h3>Expand Item</h3></legend>
    <nel-expand-item size="1.75">
      <div slot="title">Hello</div>
      <div slot="content">World</div>
    </nel-expand-item>
  </fieldset>

  <fieldset>
    <legend><h3>Item Collection</h3></legend>
    <nel-item-collection id="list-collection" align="vertical" sortable resizable>
      <div class="box">A</div>
      <div class="box">B</div>
    </nel-item-collection>
    <hr>
    <button id="erase">Clear list</button>
    <button id="sortAZ">▼ A-Z</button>
    <button id="sortZA">▲ Z-A</button>
    <button id="addItem">Add text</button>
    <input id="addItemText" type="text" placeholder="Letter of alphabet" value="C" maxlength="1" />
    <script type="text/javascript">
      (function() {
        var list = document.querySelector("#list-collection");
        document.querySelector("#erase")
          .addEventListener("click", function() {
            list.clear();
          });
        document.querySelector("#sortAZ")
          .addEventListener("click", function() {
            list.sort();
          });
        document.querySelector("#sortZA")
          .addEventListener("click", function() {
            list.sort(true);
          });
        document.querySelector("#addItem")
          .addEventListener("click", function() {
            const t = document.createElement("div");
            t.classList.add("box");
            var letter = document.querySelector("#addItemText");
            t.textContent = letter.value;
            list.appendChild(t);
          });
      })();
    </script>
  </fieldset>

  <fieldset>
    <legend><h3>List Item</h3></legend>
    <nel-item-collection id="" align="vertical" sortable resizable>
      <nel-list-item color="lightgreen" selectable deletable>World</nel-list-item>
      <nel-list-item color="lightblue" selectable deletable>Hello</nel-list-item>
    </nel-item-collection>    
    <script type="text/javascript">
      (function() {
        [].slice.call(document.querySelectorAll("nel-list-item"))
          .forEach(function(t) {
            t.addEventListener("selected", function(ev) { console.log("You selected " + ev.detail.textContent); });
            t.addEventListener("deleting", function(ev) { console.log("You are deleting " + ev.detail.textContent); });
            t.addEventListener("deleted", function(ev) { console.log("You have deleted " + ev.detail.textContent); });
          });
      })();
    </script>
  </fieldset>

  <fieldset>
    <legend><h3>Modal View</h3></legend>
    <nel-modal-view id="modal" alignment="center">
      <div class="modal-message">
        Hello world!<br>
        <button class="showModal">Hide message</button>
      </div>
    </nel-modal-view>
    <button class="showModal">View message</button>
    <script type="text/javascript">
      (function() {
        var btns = [].slice.call(document.querySelectorAll(".showModal"));
        var md = document.querySelector("#modal");
        btns.forEach(function(b) {
          b.addEventListener("click", function(ev) {
            md.open = !md.open;
          });
        });
      })();
    </script>
  </fieldset>

  <fieldset>
    <legend><h3>Network Connection</h3></legend>
    Disable the network via DevTools.<br>
    (On Chrome)<br>
    F12 Key -> Network tab -> Toggle between Online and offline
    <nel-network-connection>
      <div style="color: red">Whoa there, you are offline!</div>
    </nel-network-connection>
  </fieldset>

  <fieldset>
    <legend><h3>On Off</h3></legend>
    <div class="panel narrow">
      <nel-on-off id="OnOff" size="3" style="--bg-color-on: lightblue; --color-on: royalblue"></nel-on-off>
      <label id="lblOnOff" for="onoff">Switch is off</label>
    </div>
    <script type="text/javascript">
      (function() {
        const oo = document.querySelector("#OnOff");
        const lbl = document.querySelector("#lblOnOff");
        oo.addEventListener("toggle", function(ev) { lbl.textContent = "Switch is " + (ev.detail.on ? "on" : "off"); });
      })();
    </script>
  </fieldset> 

  <fieldset>
    <legend><h3>Text Input</h3></legend>
    <label>Text entry <nel-text-input cleartext id="txtEntry" mask="^\d+$" pattern=".*" placeholder="Enter some text" value=""></label>
    <hr>    
    <label><input id="txtEntryStandard" type="radio" name="txtEntry" checked /> Standard text</label><br>
    <label><input id="txtEntryPwd" type="radio" name="txtEntry" /> Password</label><br>
    <label>Restrict input text to <input id="textEntryMask" type="text" value="^\d+$" /></label>
    <script type="text/javascript">
      (function() {
        var t = document.querySelector("#txtEntry");
        var std = document.querySelector("#txtEntryStandard");
        var pwd = document.querySelector("#txtEntryPwd");
        var msk = document.querySelector("#textEntryMask");
        std.addEventListener("click", function() {
          t.placeholder = "Enter some text";
          t.cleartext = true;
          console.log("cleartext attribute added to text-input");
        });
        pwd.addEventListener("click", function() {
          t.placeholder = "Enter a password";
          t.cleartext = false;
          console.log("cleartext attribute removed from text-input");
        });
        msk.addEventListener("change", function() {
          t.mask = msk.value;
        });
      })();
    </script>
  </fieldset>

  <fieldset>
    <legend><h3>Text Tag</h3></legend>
    The quick brown <nel-text-tag id="mammalTag" selectable deletable color="green" label="Mammal">fox</nel-text-tag>
    jumped over the gate.
    <script type="text/javascript">
      (function() {
        const tt = document.querySelector("nel-text-tag");
        tt.addEventListener("selected", function(ev) { console.log("You selected " + ev.detail.id); });
        tt.addEventListener("deleting", function(ev) { console.log("You are deleting " + ev.detail.id); });
        tt.addEventListener("deleted", function(ev) { console.log("You have deleted " + ev.detail.id); });
      })();
    </script>
  </fieldset>

  <fieldset>
    <legend><h2>Viz</h2></legend>
    <div style="height: 200px; width: 100%">
      <nel-viz-container id="viz-con" debug
        height="100%" width="100%" border-radius="15" 
        style="--bg-color: #fefefe; --border-color: #009">
      </nel-viz-container>
      <nel-viz-data-model for="viz-con" data-set="[['oranges', 20]]">
        <nel-viz-data-series type="array" index="0">
          <nel-viz-data-item label="Fruit" type="string" index="0"></nel-viz-data-item>
          <nel-viz-data-item label="Sales" type="number" index="1"></nel-viz-data-item>
        </nel-viz-data-series>
      </nel-viz-data-model>
    </div>
    <button id="btnAddVizCircle">Add a circle</button>
    <h3>Properties</h3>
    <div class="panel narrow">
      <label>border-radius</label> <input id="rng-viz-con-rad" type="range" min="0" max="50" value="10" /> <span id="num-viz-con-rad">10</span>
    </div>
    <div class="panel narrow">
      <label>padding</label> <input id="rng-viz-pad-all" type="range" min="0" max="30" value="10" /> <span id="num-viz-pad-all">10</span>
    </div>
    <div class="panel narrow">
      <label>height</label> <input id="rng-viz-con-h" type="range" min="0" max="100" value="100" /> <span id="num-viz-con-h">100%</span>
    </div>
    <div class="panel narrow">
      <label>width</label> <input id="rng-viz-con-w" type="range" min="0" max="100" value="100" /> <span id="num-viz-con-w">100%</span>
    </div>
    <div class="panel narrow">
      <label>Lock h/w ratio</label><input type="checkbox" id="chk-viz-lock-hw" checked /><span>&nbsp;</span>
    </div>
    <div class="panel narrow">
      <label>debug</label><input type="checkbox" id="chk-viz-debug" checked /><span>&nbsp;</span>
    </div>
    <h3>Styles</h3>
    <div class="panel narrow">
      <label>--bg-color</label> <input id="txt-viz-bgcolor" type="color" value="#fefefe" />
    </div>
    <div class="panel narrow">
      <label>--border-color</label> <input id="txt-viz-bordercolor" type="color" value="#000099" />
    </div>
    <script type="text/javascript">
      (function() {
        var viz = document.querySelector("#viz-con");
        var radius = document.querySelector("#rng-viz-con-rad");
        var lock = document.querySelector("#chk-viz-lock-hw");
        var rngPadding = document.querySelector("#rng-viz-pad-all");
        var lblPadding = document.querySelector("#num-viz-pad-all");
        var rngHeight = document.querySelector("#rng-viz-con-h");
        var rngWidth = document.querySelector("#rng-viz-con-w");
        var lblHeight = document.querySelector("#num-viz-con-h");
        var lblWidth = document.querySelector("#num-viz-con-w");
        var bgcolor = document.querySelector("#txt-viz-bgcolor");
        var bordercolor = document.querySelector("#txt-viz-bordercolor");
        var debug = document.querySelector("#chk-viz-debug");
        var addVizCircle = document.querySelector("#btnAddVizCircle");

        addVizCircle.addEventListener("click", function() {
          viz.addElement(`<circle cx="${Math.random() * viz.rw}" 
            cy="${Math.random() * viz.rh}" r="${Math.random() * 10}" fill="green"></circle>`, ".canvas");
        });

        debug.addEventListener("change", function() { viz.debug = debug.checked; });

        bordercolor.addEventListener("input", function() { viz.style.setProperty("--border-color", bordercolor.value); });
        bgcolor.addEventListener("input", function() { viz.style.setProperty("--bg-color", bgcolor.value); });

        radius.addEventListener("input", function(ev) {
          var v = ev.target.value
          viz.borderRadius = v;
          document.querySelector("#num-viz-con-rad").textContent = v;
        });

        rngPadding.addEventListener("input", function(ev) {
          var v = ev.target.value;
          viz.paddingLeft = v;
          viz.paddingTop = v;
          viz.paddingRight = v;
          viz.paddingBottom = v;
          lblPadding.textContent = v;
        });

        rngHeight.addEventListener("input", function(ev) {
          var v = ev.target.value + "%";
          viz.height = v;
          lblHeight.textContent = v;
          if (lock.checked) {
            viz.width = v;
            lblWidth.textContent = v;
            rngWidth.value = ev.target.value;
          }
        });

        rngWidth.addEventListener("input", function(ev) {
          var v = ev.target.value + "%";
          viz.width = v;
          lblWidth.textContent = v;
          if (lock.checked) {
            viz.height = v;
            lblHeight.textContent = v;
            rngHeight.value = ev.target.value;
          }
        });
      })();
    </script>
  </fieldset> 
</body>
</html>